@using pmcs.Model;
@using pmcs.Model.ViewModels;

@model WorkflowDesignerViewModel
@{
    ViewBag.Title = "PMCS v1.2 - Workflow designer page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <ol class="breadcrumb">
        <li>
            <a href="#">
                <em class="fa fa-home"></em>
            </a>
        </li>
        <li class="active">Workflow Designer</li>
    </ol>
</div>
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Workflow Designer</h1>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default ">
            <div class="panel-heading">
                Manage Workflow Stages
                <span class="pull-right clickable panel-toggle panel-button-tab-left"><em class="fa fa-toggle-up"></em></span>
            </div>
            <div class="panel-body timeline-container">

                <ul class="nav nav-tabs">
                    <li class="active"><a href="#leaseWorkflow" data-toggle="tab" aria-expanded="true"><i class="fa fa-certificate"></i>Leases Workflow</a></li>
                    <li class=""><a href="#invoiceWorkflow" data-toggle="tab" aria-expanded="false"><i class="fa fa-money"></i>Invoices Workflow</a></li>
                    <li class=""><a href="#changeWorkflow" data-toggle="tab" aria-expanded="false"><i class="fa fa-sitemap"></i>Change Management Workflow</a></li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade active in" id="leaseWorkflow">
                        <h3>Leases Workflow Designer</h3>
                        <br />
                        <div id="divAddWorkflowStage"></div>
                        <br />
                        <div id="divWorkflowStages">
                            <ul class="timeline">
                                @foreach (var level in Model.LeaseWorkflowStages)
                                {
                                    <li>
                                        <div class="timeline-badge primary"><i class="fa fa-level-up"></i></div>
                                        <div class="timeline-panel">
                                            <div class="timeline-heading">
                                                <h4 class="timeline-title">@level.StageName</h4>
                                            </div>
                                            <div class="timeline-body">

                                                <div class="col-md-5">
                                                    Level Number: &nbsp;
                                                    @level.StageOrderNumber
                                                    <br />
                                                    Allowed Actions: &nbsp;
                                                    @level.AllowedActions
                                                </div>
                                                <div class="col-md-3">
                                                    <button id="BtnAddWorkflowStage_@level.StageId" style="display:none;" class="btn btn-info btn-xs" title="Add workflow level">
                                                        <i class="fa fa-plus-square"></i>
                                                    </button>
                                                    <button id="BtnEditWorkflowStage_@level.StageId" style="display:none;" class="btn btn-primary btn-xs" title="Edit workflow level">
                                                        <i class="glyphicon glyphicon-refresh"></i>
                                                    </button>
                                                    <button id="BtnDeleteWorkflowStage_@level.StageId" style="display:none;" class="btn btn-danger btn-xs" title="Delete workflow level">
                                                        <i class="glyphicon glyphicon-remove"></i>
                                                    </button>
                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="invoiceWorkflow">
                        <h3>Invoices Workflow Designer</h3>
                        <br />
                        <div id="divAddInvoiceWorkflowStage"></div>
                        <br />
                        <div id="divInvoiceWorkflowStages">
                            <ul class="timeline">
                                @foreach (var level in Model.InvoiceWorkflowStages)
                                {
                                    <li>
                                        <div class="timeline-badge primary"><i class="fa fa-level-up"></i></div>
                                        <div class="timeline-panel">
                                            <div class="timeline-heading">
                                                <h4 class="timeline-title">@level.StageName</h4>
                                            </div>
                                            <div class="timeline-body">

                                                <div class="col-md-5">
                                                    Level Number: &nbsp;
                                                    @level.StageOrderNumber
                                                    <br />
                                                    Allowed Actions: &nbsp;
                                                    @level.AllowedActions
                                                </div>
                                                <div class="col-md-3">
                                                    <button id="BtnAddInvoiceWorkflowStage_@level.StageId" style="display:none;" class="btn btn-info btn-xs" title="Add workflow level">
                                                        <i class="fa fa-plus-square"></i>
                                                    </button>
                                                    <button id="BtnEditInvoiceWorkflowStage_@level.StageId" style="display:none;" class="btn btn-primary btn-xs" title="Edit workflow level">
                                                        <i class="glyphicon glyphicon-refresh"></i>
                                                    </button>
                                                    <button id="BtnDeleteInvoiceWorkflowStage_@level.StageId" style="display:none;" class="btn btn-danger btn-xs" title="Delete workflow level">
                                                        <i class="glyphicon glyphicon-remove"></i>
                                                    </button>
                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="changeWorkflow">
                        <h4>Change Management Workflow Designer</h4>
                        <br />
                        <div id="divAddChangeWorkflowStage"></div>
                        <br />
                        <div id="divChangeWorkflowStages">
                            <ul class="timeline">
                                @foreach (var level in Model.ChangeWorkflowStages)
                                {
                                    <li>
                                        <div class="timeline-badge primary"><i class="fa fa-level-up"></i></div>
                                        <div class="timeline-panel">
                                            <div class="timeline-heading">
                                                <h4 class="timeline-title">@level.StageName</h4>
                                            </div>
                                            <div class="timeline-body">

                                                <div class="col-md-5">
                                                    Level Number: &nbsp;
                                                    @level.StageOrderNumber
                                                    <br />
                                                    Allowed Actions: &nbsp;
                                                    @level.AllowedActions
                                                </div>
                                                <div class="col-md-3">
                                                    <button id="BtnAddChangeWorkflowStage_@level.StageId" style="display:none;" class="btn btn-info btn-xs" title="Add workflow level">
                                                        <i class="fa fa-plus-square"></i>
                                                    </button>
                                                    <button id="BtnEditChangeWorkflowStage_@level.StageId" style="display:none;" class="btn btn-primary btn-xs" title="Edit workflow level">
                                                        <i class="glyphicon glyphicon-refresh"></i>
                                                    </button>
                                                    <button id="BtnDeleteChangeWorkflowStage_@level.StageId" style="display:none;" class="btn btn-danger btn-xs" title="Delete workflow level">
                                                        <i class="glyphicon glyphicon-remove"></i>
                                                    </button>
                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                    </li>
                                }
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<input type="hidden" id="hiddenUpdatedStageId" />
@section customScripts {
    <script type="text/javascript" src="/Scripts/App/Workflow/WorkflowDesigner.jsx"></script>
    <script type="text/javascript" src="/Scripts/App/Workflow/InvoiceWorkflowDesigner.jsx"></script>
    <script type="text/javascript" src="/Scripts/App/Workflow/ChangeWorkflowDesigner.jsx"></script>
}